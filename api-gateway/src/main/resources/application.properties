# API Gateway Configuration

# Application Info
quarkus.application.name=api-gateway
quarkus.http.port=8080

# Disable Dev Services (API Gateway doesn't need database)
quarkus.devservices.enabled=false
quarkus.datasource.devservices.enabled=false

# Disable Hibernate Reactive (API Gateway doesn't use database)
quarkus.hibernate-orm.enabled=false

# CORS Configuration
quarkus.http.cors=true
quarkus.http.cors.origins=http://localhost:3000,http://localhost:4200
quarkus.http.cors.methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with,x-tenant-id
quarkus.http.cors.exposed-headers=x-tenant-id,x-request-id
quarkus.http.cors.access-control-max-age=24H
quarkus.http.cors.access-control-allow-credentials=true

# JWT Configuration
mp.jwt.verify.publickey.location=publicKey.pem
mp.jwt.verify.issuer=hospital-system
quarkus.smallrye-jwt.enabled=true

# Request timeout
quarkus.http.io-threads=8
quarkus.http.limits.max-body-size=10M

# Consul Configuration
quarkus.consul-config.agent.host-port=localhost:8500
quarkus.consul-config.enabled=true

# Stork Service Discovery (Consul-based)
# Auth Service
quarkus.stork.auth-service.service-discovery.type=consul
quarkus.stork.auth-service.service-discovery.consul-host=localhost
quarkus.stork.auth-service.service-discovery.consul-port=8500
quarkus.stork.auth-service.load-balancer.type=round-robin

# Patient Service
quarkus.stork.patient-service.service-discovery.type=consul
quarkus.stork.patient-service.service-discovery.consul-host=localhost
quarkus.stork.patient-service.service-discovery.consul-port=8500
quarkus.stork.patient-service.load-balancer.type=round-robin

# Doctor Service
quarkus.stork.doctor-service.service-discovery.type=consul
quarkus.stork.doctor-service.service-discovery.consul-host=localhost
quarkus.stork.doctor-service.service-discovery.consul-port=8500
quarkus.stork.doctor-service.load-balancer.type=round-robin

# Appointment Service
quarkus.stork.appointment-service.service-discovery.type=consul
quarkus.stork.appointment-service.service-discovery.consul-host=localhost
quarkus.stork.appointment-service.service-discovery.consul-port=8500
quarkus.stork.appointment-service.load-balancer.type=round-robin

# Medical Records Service
quarkus.stork.medical-records-service.service-discovery.type=consul
quarkus.stork.medical-records-service.service-discovery.consul-host=localhost
quarkus.stork.medical-records-service.service-discovery.consul-port=8500
quarkus.stork.medical-records-service.load-balancer.type=round-robin

# Facility Service
quarkus.stork.facility-service.service-discovery.type=consul
quarkus.stork.facility-service.service-discovery.consul-host=localhost
quarkus.stork.facility-service.service-discovery.consul-port=8500
quarkus.stork.facility-service.load-balancer.type=round-robin

# Notification Service
quarkus.stork.notification-service.service-discovery.type=consul
quarkus.stork.notification-service.service-discovery.consul-host=localhost
quarkus.stork.notification-service.service-discovery.consul-port=8500
quarkus.stork.notification-service.load-balancer.type=round-robin

# Audit Service
quarkus.stork.audit-service.service-discovery.type=consul
quarkus.stork.audit-service.service-discovery.consul-host=localhost
quarkus.stork.audit-service.service-discovery.consul-port=8500
quarkus.stork.audit-service.load-balancer.type=round-robin

# REST Client Configuration
quarkus.rest-client.connect-timeout=5000
quarkus.rest-client.read-timeout=30000

# Service URLs (placeholders - using Stork for actual discovery)
services.auth-service.url=http://localhost:8081
services.patient-service.url=http://localhost:8082
services.doctor-service.url=http://localhost:8083
services.appointment-service.url=http://localhost:8084
services.medical-records-service.url=http://localhost:8085
services.facility-service.url=http://localhost:8086
services.notification-service.url=http://localhost:8087
services.audit-service.url=http://localhost:8088

# Redis Configuration (for rate limiting and caching)
quarkus.redis.hosts=redis://localhost:6379
quarkus.redis.timeout=10s

# Rate Limiting Configuration
gateway.rate-limit.enabled=true
gateway.rate-limit.requests-per-minute=100
gateway.rate-limit.burst=20

# Health Check Configuration
quarkus.health.extensions.enabled=true

# OpenAPI Configuration
quarkus.swagger-ui.always-include=true
quarkus.swagger-ui.path=/swagger-ui

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."com.hospital".level=DEBUG
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n
quarkus.log.console.json=false

# Metrics
quarkus.micrometer.enabled=true
quarkus.micrometer.export.prometheus.enabled=true

# Native Build Configuration
quarkus.native.additional-build-args=--initialize-at-run-time=io.vertx.core.impl.VertxImpl
quarkus.native.enable-all-security-services=true
